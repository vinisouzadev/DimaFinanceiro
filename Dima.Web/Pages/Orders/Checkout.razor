@page "/checkout/{productSlug}"
@inherits CheckoutPageCode

<MudContainer Class="mt-16" MaxWidth="MaxWidth.Medium">
    <MudText Typo="Typo.h3" Align="Align.Center" GutterBottom="true">Checkout</MudText>

    <MudGrid Class="mt-16" Justify="Justify.Center">
        <MudItem xs="12" sm="12" md="10" lg="8" xl="6" xxl="5">
            <MudPaper Class="d-flex flex-column" Outlined="true">
                <MudList T="string">
                    <MudListItem Icon="@Icons.Material.Filled.Star">
                        <MudText>@Product?.Title</MudText>
                        <MudText Inline="true">@(Product?.Price.ToString("C"))</MudText>
                    </MudListItem>

                    <MudDivider/>
                    <MudListItem Icon="@(Voucher is null ? Icons.Material.Filled.Discount : Icons.Material.Filled.CheckCircle)">
                        <MudTextField T="string"
                                      Disabled="@(Voucher is not null)"
                                      Placeholder="Cupom de desconto"
                                      @bind-Value="@VoucherCode"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.FactCheck"
                                      />
                    </MudListItem>

                    <MudListItem Icon="@Icons.Material.Filled.MoneyOff">
                        <div class="d-flex">
                            <MudText>Desconto</MudText>
                            <MudText Class="ml-auto">
                                @Voucher?.Amount.ToString("C")
                            </MudText>
                        </div>
                    </MudListItem>
                    <MudDivider/>
                    <div class="mt-auto pa-4">
                        <MudText>Total: </MudText>
                        <MudText Class="ml-auto">
                            <strong>
                                @Total.ToString("C")
                            </strong>
                        </MudText>
                    </div>
                </MudList>
            </MudPaper>

            <MudButton 
                OnClick="OnValidSubmitAsync"
                Variant="Variant.Filled"
                Color="Color.Primary" 
                Disabled="@(!IsValid)"
                Size="Size.Large"
                Class="mt-6"
                FullWidth="true"
                >Finalizar Pedido
            </MudButton>
        </MudItem>
    </MudGrid>
</MudContainer>